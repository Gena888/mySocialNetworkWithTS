{"version":3,"sources":["Login/Login.module.css","redux/selectors/login-selectors.ts","Login/Login.tsx"],"names":["module","exports","getIsAuth","state","auth","isAuth","getCaptchaUrl","captchaUrl","getInStateError","inStateError","LoginReduxForm","reduxForm","form","handleSubmit","error","setErrorThunk","className","s","loginForm","onSubmit","createField","required","Input","buttonAndRemember","loginButton","rememberMeDiv","undefined","formSummeryError","Login","useSelector","dispatch","useDispatch","to","loginInner","formData","email","password","rememberMe","captcha","LoginThunk","src","alt"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,iBAAmB,gCAAgC,QAAU,uBAAuB,WAAa,0BAA0B,YAAc,2BAA2B,kBAAoB,iCAAiC,cAAgB,+B,4HCG9OC,EAAY,SAACC,GACtB,OAAOA,EAAMC,KAAKC,QAGTC,EAAgB,SAACH,GAC1B,OAAOA,EAAMC,KAAKG,YAGTC,EAAkB,SAACL,GAC5B,OAAOA,EAAMC,KAAKK,cC0ChBC,EAAiBC,YAAkD,CACrEC,KAAM,SADaD,EA5BoF,SAAC,GAAsE,IAApEE,EAAmE,EAAnEA,aAAcC,EAAqD,EAArDA,MAAOP,EAA8C,EAA9CA,WAAYQ,EAAkC,EAAlCA,cAAeN,EAAmB,EAAnBA,aAC1J,OACI,uBAAMO,UAAWC,IAAEC,UAAWC,SAAUN,EAAxC,UAEKO,YAAqC,CAACC,KAAW,QAASC,IAAO,QAAS,QAC1EF,YAAqC,CAACC,KAAW,WAAYC,IAAO,WAAY,QAEhFf,GAAca,YAAqC,CAACC,KAAW,SAAUC,IAAO,UAAW,QAC5F,sBAAKN,UAAWC,IAAEM,kBAAlB,UACI,qBAAKP,UAAWC,IAAEO,YAAlB,SACI,6CAEJ,qBAAKR,UAAWC,IAAEQ,cAAlB,SACI,kCACKL,YAAqC,QAAIM,EAAWJ,IAAO,aAAc,YAC1E,uDAIXR,EAAQC,EAAcD,GAAS,KAChC,qBAAKE,UAAWP,GAAgBF,EAAaU,IAAEU,iBAAmB,GAAlE,SACKlB,GAAgBF,GAAc,8BAAME,YAoDtCmB,UAtCD,WAEV,IAAMvB,EAASwB,YAAY3B,GACrBK,EAAasB,YAAYvB,GACzBG,EAAeoB,YAAYrB,GAC3BsB,EAAWC,cAYjB,OAAI1B,EACO,cAAC,IAAD,CAAU2B,GAAI,aAIrB,sBAAKhB,UAAWC,IAAEgB,WAAlB,UACI,uCACA,cAACvB,EAAD,CACIS,SAZK,SAACe,GAPS,IAACC,EAAeC,EAAkBC,EAAqBC,EAQ9ER,GARwBK,EAQID,EAASC,MAREC,EAQKF,EAASE,SARIC,EAQMH,EAASG,WARMC,EAQMJ,EAASI,aAP7FR,EAASS,YAAWJ,EAAOC,EAAUC,EAAYC,OAmBzC/B,WAAYA,EACZQ,cAlBkB,SAACD,GAC3BgB,EAASf,YAAcD,KAkBfL,aAAcA,IAElB,8BACKF,GAAc,qBAAKS,UAAWC,IAAEqB,QAASE,IAAKjC,EAAYkC,IAAI","file":"static/js/3.bd9445c9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formSummeryError\":\"Login_formSummeryError__3oPzO\",\"captcha\":\"Login_captcha__-t4l9\",\"loginInner\":\"Login_loginInner__2TCO8\",\"loginButton\":\"Login_loginButton__1siJB\",\"buttonAndRemember\":\"Login_buttonAndRemember__1Hhl2\",\"rememberMeDiv\":\"Login_rememberMeDiv__3rHT9\"};","import { createSelector } from \"reselect\"\r\nimport { AppStateType } from \"../redux-store\"\r\n\r\n\r\nexport const getIsAuth = (state: AppStateType) => {\r\n    return state.auth.isAuth\r\n}\r\n\r\nexport const getCaptchaUrl = (state: AppStateType) => {\r\n    return state.auth.captchaUrl\r\n}\r\n\r\nexport const getInStateError = (state: AppStateType) => {\r\n    return state.auth.inStateError\r\n}\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { InjectedFormProps, reduxForm, submit } from 'redux-form';\r\nimport { Input } from '../components/Common/FormsControls/FormsControls';\r\nimport { required } from '../Utils/Validators/Validaors';\r\nimport { LoginThunk, setErrorThunk } from '../redux/auth-reducer';\r\nimport { connect, useSelector, useDispatch } from 'react-redux';\r\nimport { Redirect } from 'react-router';\r\nimport s from './Login.module.css'\r\nimport { createField } from '../components/Common/FormsControls/FormsControls';\r\nimport { AppStateType } from '../redux/redux-store';\r\nimport { getIsAuth, getCaptchaUrl, getInStateError } from '../redux/selectors/login-selectors';\r\n\r\ntype LoginFormOwnProps = {\r\n    captchaUrl: string | null\r\n    setErrorThunk: (error: string | null) => void\r\n    inStateError: string | null\r\n}\r\n\r\nexport type LoginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\n\r\ntype LoginFormValuesTypeKeys = Extract<keyof LoginFormValuesType, string>\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormValuesType, LoginFormOwnProps> & LoginFormOwnProps> = ({ handleSubmit, error, captchaUrl, setErrorThunk, inStateError }) => {\r\n    return (\r\n        <form className={s.loginForm} onSubmit={handleSubmit}>\r\n            {/* createField = (validate, placeholder, component, name, type) */}\r\n            {createField<LoginFormValuesTypeKeys>([required], 'Email', Input, 'email', 'text')}\r\n            {createField<LoginFormValuesTypeKeys>([required], 'Password', Input, 'password', 'text')}\r\n\r\n            {captchaUrl && createField<LoginFormValuesTypeKeys>([required], 'Captha', Input, 'captcha', 'text')}\r\n            <div className={s.buttonAndRemember}>\r\n                <div className={s.loginButton}>\r\n                    <button>LOGIN</button>\r\n                </div>\r\n                <div className={s.rememberMeDiv}>\r\n                    <label >\r\n                        {createField<LoginFormValuesTypeKeys>([], undefined, Input, 'rememberMe', 'checkbox')}\r\n                        <span>remember me</span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            {error ? setErrorThunk(error) : null}\r\n            <div className={inStateError || captchaUrl ? s.formSummeryError : ''}>\r\n                {inStateError || captchaUrl && <div>{inStateError}</div>}\r\n            </div>\r\n\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormValuesType, LoginFormOwnProps>({\r\n    form: 'login'\r\n})(LoginForm)\r\n\r\n\r\n\r\n\r\nconst Login = () => {\r\n\r\n    const isAuth = useSelector(getIsAuth)\r\n    const captchaUrl = useSelector(getCaptchaUrl)\r\n    const inStateError = useSelector(getInStateError)\r\n    const dispatch = useDispatch()\r\n    const callbackLoginThunk = (email: string, password: string, rememberMe: boolean, captcha: string) => {\r\n        dispatch(LoginThunk(email, password, rememberMe, captcha))\r\n    }\r\n    const callbackSetErrorThunk = (error: string | null) => {\r\n        dispatch(setErrorThunk(error))\r\n    }\r\n\r\n    const onSubmit = (formData: LoginFormValuesType) => {\r\n        dispatch(callbackLoginThunk(formData.email, formData.password, formData.rememberMe, formData.captcha))\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'} />\r\n    }\r\n\r\n    return (\r\n        <div className={s.loginInner}>\r\n            <h1>login</h1>\r\n            <LoginReduxForm\r\n                onSubmit={onSubmit}\r\n                captchaUrl={captchaUrl}\r\n                setErrorThunk={callbackSetErrorThunk}\r\n                inStateError={inStateError}\r\n            />\r\n            <div>\r\n                {captchaUrl && <img className={s.captcha} src={captchaUrl} alt=\"captchaImg\" />}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Login;"],"sourceRoot":""}